const p="GET_TAB_URL",m="CLICK_SHORTCUT",R="GET_LOCALSTORAGE",T="SET_LOCALSTORAGE",u=(r,l)=>{let e=!1;return l.split(",").forEach(t=>{let s=t.trim().split("-");if(s.length===1&&(s=[s[0],s[0]]),r<=s[0]&&r>=s[1]){e=!0;return}}),e},f=(r,l,e)=>{let t="";return e&&(e.forEach(n=>{if(u(l,n.ports)){if(!n.siteRoots)return;n.siteRoots.forEach(s=>{if(s==="{%no_site_root%}"){t=null;return}if(r.startsWith(s)){t=s;return}})}}),t===""&&(t=r.split("/")[0])),t},h=(r,l)=>{let e=r;const t={scheme:null,domain:null,port:null,siteRoot:null,path:null,query:null};if(!e||e==="")return t;e.startsWith("http:")&&(t.scheme="http://",e=e.slice(7)),e.startsWith("https:")&&(t.scheme="https://",e=e.slice(8));const n=e.split("/")[0],s=n.split(":");if(t.domain=s[0],s.length>1&&(t.port=s[1]),e=e.slice(n.length+1),t.port&&(t.siteRoot=f(e,t.port,l),t.siteRoot&&(e=e.slice(t.siteRoot.length+1))),e.length>1){const o=e.split("?");t.path=o[0],o.length>1&&(t.query=o[1])}return t},A=(r,l,e)=>{if(!r||!l)return"";const t=h(r,e);let n="";t.scheme&&(n=n+t.scheme),t.domain&&(n=n+t.domain);let s="";t.port&&(s=":"+t.port),t.siteRoot&&(s=s+"/"+t.siteRoot),s!==""&&(n=n+s),n===""&&(n=null);const o={"{%scheme%}":t.scheme,"{%domain%}":t.domain,"{%port%}":s!==""?s:null,"{%start%}":n,"{%path%}":t.path?"/"+t.path:null,"{%query%}":t.query?"?"+t.query:null};let i=l;return Object.keys(o).forEach(a=>{const c=o[a];c?i=i.replaceAll(a,c):i=i.replaceAll(a,"")}),i};export{m as C,p as G,T as S,R as a,A as n};
