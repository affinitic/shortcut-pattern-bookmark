const p="GET_TAB_URL",m="CLICK_SHORTCUT",R="GET_LOCALSTORAGE",T="SET_LOCALSTORAGE",u=(r,o)=>{let e=!1;return o.split(",").forEach(t=>{let n=t.trim().split("-");if(n.length===1&&(n=[n[0],n[0]]),r<=n[0]&&r>=n[1]){e=!0;return}}),e},f=(r,o,e)=>{let t="";return e&&(e.forEach(s=>{if(u(o,s.ports)){if(!s.siteRoots)return;s.siteRoots.forEach(n=>{if(n==="{%no_site_root%}"){t=null;return}if(r.startsWith(n)){t=n;return}})}}),t===""&&(t=r.split("/")[0])),t},h=(r,o)=>{let e=r;const t={scheme:null,domain:null,port:null,siteRoot:null,path:null,query:null};if(!e||e==="")return t;e.startsWith("http:")&&(t.scheme="http://",e=e.slice(7)),e.startsWith("https:")&&(t.scheme="https://",e=e.slice(8));const s=e.split("/")[0],n=s.split(":");if(t.domain=n[0],n.length>1&&(t.port=n[1]),e=e.slice(s.length+1),t.port&&(t.siteRoot=f(e,t.port,o),t.siteRoot&&(e=e.slice(t.siteRoot.length+1))),e.length>1){const i=/[#?]/,l=e.split(i);t.path=l[0],l.length>1&&(t.query=l[1])}return t},A=(r,o,e)=>{if(!r||!o)return"";const t=h(r,e);let s="";t.scheme&&(s=s+t.scheme),t.domain&&(s=s+t.domain);let n="";t.port&&(n=":"+t.port),t.siteRoot&&(n=n+"/"+t.siteRoot),n!==""&&(s=s+n),s===""&&(s=null);const i={"{%scheme%}":t.scheme,"{%domain%}":t.domain,"{%port%}":n!==""?n:null,"{%start%}":s,"{%path%}":t.path?"/"+t.path:null,"{%query%}":t.query?"?"+t.query:null};let l=o;return Object.keys(i).forEach(a=>{const c=i[a];c?l=l.replaceAll(a,c):l=l.replaceAll(a,"")}),l};export{m as C,p as G,T as S,R as a,A as n};
